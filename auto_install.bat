@echo off
chcp 65001 > nul
echo ===================================================
echo    –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –£–°–¢–ê–ù–û–í–ö–ê –ú–ï–î–ò–¶–ò–ù–°–ö–û–ì–û –ê–°–°–ò–°–¢–ï–ù–¢–ê
echo ===================================================
echo.

echo [1/6] –ü—Ä–æ–≤–µ—Ä–∫–∞ Python...
python --version > nul 2>&1
if %errorlevel% neq 0 (
    echo ‚ùå Python –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω! –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3.8+ —Å python.org
    pause
    exit /b 1
)
echo ‚úÖ Python –æ–±–Ω–∞—Ä—É–∂–µ–Ω

echo [2/6] –ü—Ä–æ–≤–µ—Ä–∫–∞ Ollama...
ollama --version > nul 2>&1
if %errorlevel% neq 0 (
    echo ‚ùå Ollama –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞! –°–∫–∞—á–∞–π—Ç–µ —Å ollama.ai
    pause
    exit /b 1
)
echo ‚úÖ Ollama –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞

echo [3/6] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—É—Ç–µ–π –¥–ª—è Ollama...
set OLLAMA_MODELS=D:\ollama\models
mkdir D:\ollama\models > nul 2>&1
echo ‚úÖ –ü–∞–ø–∫–∞ –¥–ª—è –º–æ–¥–µ–ª–µ–π —Å–æ–∑–¥–∞–Ω–∞: D:\ollama\models

echo [4/6] –ó–∞–ø—É—Å–∫ Ollama —Å–µ—Ä–≤–µ—Ä–∞...
start /B ollama serve
timeout /t 5 > nul
echo ‚úÖ Ollama —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω

echo [5/6] –£—Å—Ç–∞–Ω–æ–≤–∫–∞ AI –º–æ–¥–µ–ª–µ–π...
echo üîÑ –ü—ã—Ç–∞–µ–º—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å llama3.2:1b (–ª–µ–≥–∫–∞—è –º–æ–¥–µ–ª—å)...
ollama pull llama3.2:1b

if %errorlevel% neq 0 (
    echo ‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å llama3.2:1b
    echo üîÑ –ü—Ä–æ–±—É–µ–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å llama2...
    ollama pull llama2
)

if %errorlevel% neq 0 (
    echo ‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
    echo üí° –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ñ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º
)

echo [6/6] –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π...
pip install -r requirements.txt > nul 2>&1
if %errorlevel% neq 0 (
    pip install flask flask-cors > nul 2>&1
)
echo ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

echo.
echo ===================================================
echo üéâ –£–°–¢–ê–ù–û–í–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê!
echo.
echo üìç –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞: python direct_integration.py
echo üìç –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: index.html
echo.
echo ‚ö†Ô∏è  –ï—Å–ª–∏ –º–æ–¥–µ–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ñ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º
echo ===================================================
pause